<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="theme-switch-container">
            <div class="theme-switch-wrapper">
                <span>–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                <label class="theme-switch">
                    <input type="checkbox" id="themeSwitch">
                    <span class="theme-slider"></span>
                </label>
            </div>
            <select id="currencySelector" class="currency-selector">
                <option value="RUB">–†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å (‚ÇΩ)</option>
                <option value="USD">–î–æ–ª–ª–∞—Ä –°–®–ê ($)</option>
                <option value="EUR">–ï–≤—Ä–æ (‚Ç¨)</option>
                <option value="GBP">–§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤ (¬£)</option>
                <option value="CNY">–ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å (¬•)</option>
            </select>
            <div class="tools-dropdown">
                <button id="toolsBtn" class="tools-btn">‚öôÔ∏è</button>
                <div id="toolsContent" class="tools-content">
                    <button id="backupData">üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö</button>
                    <button id="restoreData">üìÇ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã—Ö</button>
                    <button id="clearData">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
                    <button id="manageWorkplaces">üè¢ –ú–µ—Å—Ç–∞ —Ä–∞–±–æ—Ç—ã</button>
                    <button id="openArchive">üóÉÔ∏è –ê—Ä—Ö–∏–≤</button>
                    <div class="settings-group">
                        <h3>–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤:</h3>
                        <div class="report-buttons">
                            <button onclick="generateReport('csv')" class="report-btn">CSV</button>
                            <button onclick="generateReport('print')" class="report-btn">–ü–µ—á–∞—Ç—å</button>
                            <button onclick="generateReport('pdf')" class="report-btn">PDF</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <h1>–£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</h1>
        
        <div class="control-panel">
            <div class="rate-section">
                <label for="hourlyRate">–°—Ç–∞–≤–∫–∞ –≤ —á–∞—Å:</label>
                <input type="number" id="hourlyRate" min="0" step="10" value="200">
            </div>
            <div class="form-group">
                <label for="lunchDurationInput">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–µ–¥–∞</label>
                <select id="lunchDurationInput">
                    <option value="30">30 –º–∏–Ω—É—Ç</option>
                    <option value="60" selected>1 —á–∞—Å</option>
                </select>
            </div>
            <div class="spoiler">
                <div class="spoiler-header">
                    <button type="button" class="spoiler-toggle primary-btn">–î–æ–ø —Ñ—É–Ω–∫—Ü–∏–∏</button>
                </div>
                <div class="spoiler-content">
                    <div class="workplace-section">
                        <div class="checkbox-container">
                            <input type="checkbox" id="useGlobalWorkplace">
                            <label for="useGlobalWorkplace">–£–∫–∞–∑–∞—Ç—å –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</label>
                            <button id="openWorkplaceModalBtn" class="add-workplace-btn">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <line x1="12" y1="4" x2="12" y2="20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </button>
                        </div>
                        <div id="globalWorkplaceContainer" style="display: none;">
                            <label for="globalWorkplaceSelector">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É:</label>
                            <select id="globalWorkplaceSelector">
                                <option value="">–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞</option>
                                <option value="1741647898929">–ú–∞–∫ (340 —Ä—É–±/—á)</option>
                                <option value="1741647911510">–ì–ª–æ–±—É—Å (470 —Ä—É–±/—á)</option>
                            </select>
                        </div>
                    </div>
                    <div class="tax-section">
                        <div class="checkbox-container">
                            <input type="checkbox" id="taxDeduction">
                            <label for="taxDeduction">–í—ã—á–µ—Ç –Ω–∞–ª–æ–≥–∞</label>
                        </div>
                        <div class="tax-rate-container" id="taxRateContainer">
                            <label for="taxRate">–°—Ç–∞–≤–∫–∞ –Ω–∞–ª–æ–≥–∞:</label>
                            <input type="number" id="taxRate" min="0" max="100" step="1" value="13">
                            <div class="tax-presets">
                                <button class="tax-preset-btn" data-rate="13">–ù–î–§–õ 13%</button>
                                <button class="tax-preset-btn" data-rate="4">–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π 4%</button>
                                <button class="tax-preset-btn" data-rate="6">–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π 6%</button>
                            </div>
                        </div>
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="paidLunch">
                        <label for="paidLunch">–û–ø–ª–∞—á–∏–≤–∞–µ–º—ã–π –æ–±–µ–¥</label>
                    </div>
                </div>
            </div>
            <div class="buttons">
                <button id="startShift" class="primary-btn">–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É</button>
                <button id="endShift" class="secondary-btn" disabled>–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–º–µ–Ω—É</button>
                <button id="addShift" class="primary-btn">–î–æ–±–∞–≤–∏—Ç—å —Å–º–µ–Ω—É –≤—Ä—É—á–Ω—É—é</button>
            </div>

            <div class="status">
                <div id="currentStatus">–°—Ç–∞—Ç—É—Å: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ</div>
                <div id="currentShiftTime" class="hidden">–¢–µ–∫—É—â–∞—è —Å–º–µ–Ω–∞: 00:00:00</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="table">
                <span class="tab-emoji">üìã</span>
                <span class="tab-text">–¢–∞–±–ª–∏—Ü–∞</span>
            </button>
            <button class="tab-btn" data-tab="charts">
                <span class="tab-emoji">üìä</span>
                <span class="tab-text">–ì—Ä–∞—Ñ–∏–∫–∏</span>
            </button>
            <button class="tab-btn" data-tab="statistics">
                <span class="tab-emoji">üìà</span>
                <span class="tab-text">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </button>
            <button class="tab-btn" data-tab="calendar">
                <span class="tab-emoji">üìÖ</span>
                <span class="tab-text">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
            </button>
        </div>

        <div id="table" class="tab-content active">
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>–î–∞—Ç–∞</th>
                            <th>–ú–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</th>
                            <th>–°—Ç–∞–≤–∫–∞ –≤ —á–∞—Å</th>
                            <th>–ù–∞—á–∞–ª–æ</th>
                            <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
                            <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                            <th>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</th>
                            <th>–û–±–µ–¥ –æ–ø–ª.</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="shiftsTableBody">
                        <!-- –î–∞–Ω–Ω—ã–µ —Å–º–µ–Ω –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </tbody>
                </table>
            </div>
            <div class="mobile-table-container" id="mobileShiftsContainer">
                <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ç–∞–±–ª–∏—Ü—ã –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–¥–µ—Å—å -->
            </div>
            <div id="mobilePagination"></div>
            <div class="table-summary">
                <div>–í—Å–µ–≥–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="totalTime">0 —á 0 –º–∏–Ω</span></div>
                <div>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –≤—Å–µ–≥–æ: <span id="totalEarned">0</span></div>
            </div>
        </div>

        <div id="charts" class="tab-content">
            <div class="chart-container">
                <canvas id="weeklyChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="monthlyChart"></canvas>
            </div>
        </div>

        <div id="statistics" class="tab-content">
            <div class="statistics-grid">
                <div class="statistics-card">
                    <div class="statistics-value" id="statTotalShifts">0</div>
                    <div class="statistics-label">–í—Å–µ–≥–æ —Å–º–µ–Ω</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statTotalHours">0</div>
                    <div class="statistics-label">–í—Å–µ–≥–æ —á–∞—Å–æ–≤</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statTotalEarnings">0</div>
                    <div class="statistics-label">–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statAvgHoursPerDay">0</div>
                    <div class="statistics-label">–°—Ä–µ–¥–Ω–µ–µ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statAvgEarningsPerDay">0</div>
                    <div class="statistics-label">–°—Ä–µ–¥–Ω–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–µ–Ω—å</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statAvgEarningsPerHour">0</div>
                    <div class="statistics-label">–°—Ä–µ–¥–Ω–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ —á–∞—Å</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statWeekHours">0</div>
                    <div class="statistics-label">–ß–∞—Å–æ–≤ –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é</div>
                </div>
                <div class="statistics-card">
                    <div class="statistics-value" id="statWeekEarnings">0</div>
                    <div class="statistics-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                </div>
            </div>
            
            <h2 class="section-title">–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
            
            <div class="performance-metrics">
                <!-- Performance metrics will be populated here -->
            </div>
            
            <div class="chart-container">
                <canvas id="performanceChart"></canvas>
            </div>
            
            <div class="performance-trends">
                <div class="performance-trend-card" id="bestDay">
                    <h3>–õ—É—á—à–∏–π –¥–µ–Ω—å</h3>
                    <div id="bestDayValue">-</div>
                </div>
                <div class="performance-trend-card" id="worstDay">
                    <h3>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏</h3>
                    <div id="productiveDayValue">-</div>
                </div>
            </div>
        </div>

        <div id="calendar" class="tab-content">
            <h2>–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–º–µ–Ω</h2>
            <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∞—à–∏—Ö —Ä–∞–±–æ—á–∏—Ö —Å–º–µ–Ω –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.</p>
            
            <div class="calendar-navigation">
                <button id="prevMonth" class="secondary-btn">‚óÄ</button>
                <h3 id="currentMonthYear">–ú–µ—Å—è—Ü –ì–æ–¥</h3>
                <button id="nextMonth" class="secondary-btn">‚ñ∂</button>
            </div>
            
            <div class="calendar-container">
                <div class="calendar-weekdays">
                    <div>–í—Å</div><div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div>–°–±</div>
                </div>
                <div id="calendarDays" class="calendar-days"></div>
            </div>
            
            <div id="calendarDetails" class="calendar-details">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π</h3>
            </div>
        </div>

        <div id="shiftModal" class="modal">
            <div class="modal-content">
                <h2 id="shiftModalTitle" class="modal-title">–î–æ–±–∞–≤–∏—Ç—å —Å–º–µ–Ω—É</h2>
                <form id="shiftForm">
                    <div class="form-group">
                        <label for="shiftDate">–î–∞—Ç–∞</label>
                        <input type="date" id="shiftDate" required>
                    </div>
                    <div class="form-group">
                        <label for="shiftStart">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</label>
                        <input type="time" id="shiftStart" required>
                    </div>
                    <div class="form-group">
                        <label for="shiftEnd">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="time" id="shiftEnd" required>
                    </div>
                    <div class="checkbox-container form-group">
                        <input type="checkbox" id="useWorkplace">
                        <label for="useWorkplace">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</label>
                    </div>
                    <div class="form-group" id="workplaceContainer" style="display: none;">
                        <label for="shiftWorkplace">–ú–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã</label>
                        <select id="shiftWorkplace">
                            <option value="">–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞</option>
                            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </select>
                    </div>
                    <div class="checkbox-container form-group">
                        <input type="checkbox" id="shiftPaidLunch">
                        <label for="shiftPaidLunch">–û–ø–ª–∞—á–∏–≤–∞–µ–º—ã–π –æ–±–µ–¥</label>
                    </div>
                    <div class="form-group">
                        <label for="shiftLunchDuration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–µ–¥–∞</label>
                        <select id="shiftLunchDuration">
                            <option value="30">30 –º–∏–Ω—É—Ç</option>
                            <option value="60" selected>1 —á–∞—Å</option>
                        </select>
                    </div>
                    <div class="checkbox-container form-group">
                        <input type="checkbox" id="shiftTaxDeduction">
                        <label for="shiftTaxDeduction">–í—ã—á–µ—Ç –Ω–∞–ª–æ–≥–∞</label>
                    </div>
                    <div class="form-group" id="shiftTaxRateContainer" style="display: none;">
                        <label for="shiftTaxRate">–°—Ç–∞–≤–∫–∞ –Ω–∞–ª–æ–≥–∞ (%)</label>
                        <input type="number" id="shiftTaxRate" min="0" max="100" step="1" value="13">
                    </div>
                    <div class="modal-buttons">
                        <button type="button" id="closeModal" class="close-btn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" id="saveShift" class="primary-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="workplaceModal" class="modal">
            <div class="modal-content">
                <h2 id="workplaceModalTitle" class="modal-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–∞–º–∏ —Ä–∞–±–æ—Ç—ã</h2>
                <form id="workplaceForm">
                    <input type="hidden" id="workplaceId">
                    <div class="form-group">
                        <label for="workplaceName">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ —Ä–∞–±–æ—Ç—ã</label>
                        <input type="text" id="workplaceName" required>
                    </div>
                    <div class="form-group">
                        <label for="workplaceRate">–°—Ç–∞–≤–∫–∞ –≤ —á–∞—Å</label>
                        <input type="number" id="workplaceRate" min="0" step="10" required>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" id="closeWorkplaceModal" class="close-btn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" id="saveWorkplace" class="primary-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
                <h3>–°–ø–∏—Å–æ–∫ –º–µ—Å—Ç —Ä–∞–±–æ—Ç—ã</h3>
                <div id="workplaceList"></div>
            </div>
        </div>

        <div id="archiveModal" class="modal">
            <div class="modal-content">
                <h2 class="modal-title">–ê—Ä—Ö–∏–≤ —Ç–∞–±–ª–∏—Ü</h2>
                <div class="archive-controls">
                    <div class="form-group">
                        <label for="archiveTableName">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ç–∞–±–ª–∏—Ü—ã:</label>
                        <input type="text" id="archiveTableName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞–±–æ—Ç–∞ –≤ –º–∞–µ 2023">
                    </div>
                    <button id="saveToArchive" class="primary-btn">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ç–∞–±–ª–∏—Ü—É –≤ –∞—Ä—Ö–∏–≤</button>
                    <div class="search-sort-container">
                        <div class="form-group">
                            <input type="text" id="archiveSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">
                        </div>
                        <div class="form-group">
                            <select id="archiveSort">
                                <option value="date-desc">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                                <option value="date-asc">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
                                <option value="name-asc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
                                <option value="name-desc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="archive-list-container">
                    <h3>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã</h3>
                    <div id="archiveList" class="archive-list">
                        <!-- Archived tables will appear here -->
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" id="closeArchiveModal" class="close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <script src="app.js" type="module"></script>
    </div>

</body>
</html>